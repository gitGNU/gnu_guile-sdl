;;; common -*- scheme -*-

(define (env-1? x)
  (string=? "1" (or (getenv x) "")))

(define *have-ttf*    (env-1? "HAVE_TTF"))
(define *have-mixer*  (env-1? "HAVE_MIXER"))
(define *interactive* (env-1? "INTERACTIVE"))

(define (fso s . args)
  (apply simple-format #t s args))

(define (exit-77 msg)
  (fso "INFO: ~A: ~A\n" (car (command-line)) (string-upcase msg))
  (exit 77))

(define (datafile name)
  (in-vicinity (or (and=> (getenv "srcdir")
                          (lambda (d) (in-vicinity d "test")))
                   ".")
               name))

(define debug? (env-1? "DEBUG"))
(and debug? (debug-enable 'debug 'backtrace))

;;; common ends here
