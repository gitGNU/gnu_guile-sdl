2007-01-02  Thien-Thi Nguyen  <ttn@ambire>

	* sdlevent.c (NUM2_GETTER, NUM2_SETTER, NUM3_GETTER, NUM3_SETTER):
	Prettify docstrings; remove whitespace between C struct components.

2007-01-01  Thien-Thi Nguyen  <ttn@ambire>

	* sdlcdrom.c (GETCUR): New macro.
	(cd_get_num_tracks, cd_get_cur_track, cd_get_cur_frame): Use it.

2006-12-19  Thien-Thi Nguyen  <ttn@ambire>

	* sdlcdrom.c (RETURN_NEW_CDROM): Use `NEWSMOB_OR_FALSE'.

	* sdlcolor.c (make_color): Don't init `color' if it is NULL.

	* sdlevent.c (RETURN_NEW_EVENT)
	(RETURN_NEW_KEYSYM): Use `NEWSMOB_OR_FALSE'.
	(make_event): Don't init `event' if it is NULL.
	(make_keysym): Likewise for `keysym'.

	* sdljoystick.c (RETURN_NEW_JOYSTICK): Use `NEWSMOB_OR_FALSE'.

	* sdlrect.c (make_rect): Don't init `rect' if it is NULL.

	* sdlsurface.c (load_image): Use `RETURN_NEW_SURFACE'.
	(get_clip_rect): Don't init `rect' if it is NULL;

	* sdlvideo.c (RETURN_NEW_CURSOR)
	(RETURN_NEW_OVERLAY): Use `NEWSMOB_OR_FALSE'.
	(create_cursor, get_cursor): Don't init `cursor' if it is NULL.
	(set_colors, set_palette): Likewise for `ccolors'.

2006-12-15  Thien-Thi Nguyen  <ttn@ambire>

	* sdlsurface.c (load_image): Return #f if there are problems.

2006-12-07  Thien-Thi Nguyen  <ttn@ambire>

	* sdlvideo.c (wm_grab_input): Handle MODE being -1, 0, 1.

2006-12-07  Thien-Thi Nguyen  <ttn@ambire>

	* sdlvideo.c (query, off, on): New simple symbols.
	(wm_grab_input): Rewrite.

2006-11-16  Thien-Thi Nguyen  <ttn@ambire>

	* sdlsurface.c (make_surface): Fix bug: If there
	is no current surface, don't try to get its flags.

2006-11-16  Thien-Thi Nguyen  <ttn@ambire>

	* sdlsurface.c (make_surface): Fix bug: Get default
	pixel-format info from current video surface, if available.

2006-11-16  Thien-Thi Nguyen  <ttn@ambire>

	* sdlsurface.c (set_clip_rect):
	If RECT is #f, clear the the clip rect.

2006-11-16  Thien-Thi Nguyen  <ttn@ambire>

	* sdlvideo.c (update_rects): Use `ASSERT_LIST'.

2006-11-14  Thien-Thi Nguyen  <ttn@ambire>

	* sdl.c (quit, quit_subsystem): Return true.

2006-10-27  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (get_video_info): Fix typo: "wm-available".
	Also, use boolean for `blit-fill' alist element.

2006-10-26  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (map_rgb, map_rgba): Fix bug: Return unsigned integer.

2006-07-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (peep_events): Typecheck NUMEVENTS.
	Throw "bad action" error on unrecognized ACTION.

2006-07-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (peep_events): Doc fix.

2006-05-28  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlrect.c (rect_p): New GH_DEFPROC.
	* sdlcolor.c (color_p): New GH_DEFPROC.

2006-01-27  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (get_key_state): Write implementation.

2005-05-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* misc.c: Include <SDL/SDL_syswm.h>.
	(x11): New symbol.
	(get_wm_info): New GH_DEFPROC.

2005-05-16  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c (mark_cd): Delete func.
	(gsdl_init_cdrom): Don't register a mark func for "SDL-CD".

	* sdlcolor.c (mark_color): Delete func.
	(gsdl_init_color): Don't register a mark func for "SDL-Color".

	* sdlenums.c (mark_flagstash): Delete func.
	(gsdl_init_enums): Don't register a mark func for "flagstash".

	* sdlevent.c (mark_event, mark_keysym): Delete funcs.
	(gsdl_init_event): Don't register mark
	funcs for "SDL-Event" and "SDL-Keysym".

	* sdljoystick.c (mark_joy): Delete func.
	(gsdl_init_joystick): Don't register a mark func for "SDL-Joystick".

	* sdlrect.c (mark_rect): Delete func.
	(gsdl_init_rect): Don't register a mark func for "SDL-Rect".

	* sdlsurface.c (mark_surface): Delete func.
	(gsdl_init_surface): Don't register a mark func for "SDL-Surface".

	* sdlvideo.c (mark_cursor, mark_yuv_overlay)
	(mark_pixel_format): Delete funcs.
	(gsdl_init_video): Don't register mark funcs
	for "SDL-Cursor", "SDL-Pixel-Format" and "SDL-Overlay".

2005-05-16  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlenums.c (free_enum): Fix bug: return amount freed.

2005-05-16  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (xSDL_Cursor): New struct typedef.
	(MALLOC_XSDL_CURSOR): New macro.
	(UNPACK_CURSOR): Use `xSDL_Cursor'.
	(mark_cursor): Return SCM_BOOL_F.
	(mark_yuv_overlay, mark_pixel_format): Likewise.
	(free_cursor): Rewrite.
	(create_cursor): Use `xSDL_Cursor'.
	(set_cursor, get_cursor): Likewise.
	(gsdl_init_video): For `cursor' smob, use `xSDL_Cursor'.

2005-05-15  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (mark_surface): Return SCM_BOOL_F.
	(gsdl_init_surface): Fix bug: For `surface' smob, arrange
	to allocate space for `SDL_Surface *' only, not `SDL_Surface'.

	* sdlrect.c (mark_rect): Return SCM_BOOL_F.
	(free_rect): Fix bug: return amount freed.
	Also, use `UNPACK_RECT'.

	* sdlevent.c (mark_event, mark_keysym): Return SCM_BOOL_F.
	(free_event): Fix bug: return amount freed.
	(free_keysym): Elide auto var; nfc.

	* sdlcolor.c (mark_color): Return SCM_BOOL_F.
	(free_color): Fix bug: return amount freed.

	* sdljoystick.c (mark_joy): Return SCM_BOOL_F.

	* sdlcdrom.c (mark_cd): Return SCM_BOOL_F.
	(gsdl_init_cdrom): Fix bug: For `cdrom' smob, arrange
	to allocate space for `SDL_CD *' only, not `SDL_CD'.

2005-04-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlenums.c (gsdl_flags2ulong):
	If `flags' is #f or the empty list, return 0.

2005-04-02  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* misc.c: New file.
	* Makefile.am (WRAPPER_SOURCES): Add misc.c.
	* sdl.c (gsdl_init_misc): New extern func decl.
	(init_module): Call `gsdl_init_misc'.

2005-02-07  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (print_pixel_format): New static func.
	(gsdl_init_video): Register new func as pixel format printer.

2005-02-07  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (print_surface): Use `scm_putc' and `scm_intprint'.
	* sdlrect.c (print_rect): Likewise.
	* sdljoystick.c (print_joy): Likewise.
	* sdlenums.c (print_flagstash): Likewise.
	* sdlcolor.c (print_color): Likewise.

2005-02-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (set_alpha): Make third arg optional.
	If unspecified, take it as zero.
	Also, take #f for `flag' as zero, as well.

2005-02-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (create_rgb_surface): Fix signedness bug:
	Use `gh_scm2ulong'.  Also, remove redundant casts.

	* sdlvideo.c (map_rgb): Likewise.
	(map_rgba): Likewise.
	(get_rgb): Likewise.
	(get_rgba): Likewise.
	(warp_mouse): Likewise.

2005-02-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (make_surface): Remove redundant casts.
	(create_rgb_surface): Likewise.
	(set_color_key): Likewise.
	(set_alpha): Likewise.
	(convert_surface): Likewise.

	* sdlvideo.c (list_modes): Likewise.
	(video_mode_ok): Likewise.
	(set_video_mode): Likewise.
	(update_rect): Likewise.

2005-02-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcolor.c (NUMBER_SETTER):
	Pass additional arg to `GSDL_NUMBER_SETTER'.

	* sdlevent.c (NUMBER_SETTER): Likewise.

	* sdlrect.c (NUMBER_SETTER):
	Take additional arg `conv'; pass it to `GSDL_NUMBER_SETTER'.
	(NUMBER_GETSET): Take additional arg `c2s'. Update callers.

2005-02-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (make_event): Use `GSDL_ENUM2LONG'.
	(make_keysym): Likewise.
	(peep_events): Likewise.
	(event_state): Likewise.

	* sdlsurface.c (set_alpha): Likewise.

2005-02-05  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (get_clip_rect): Fix omission bug: Allocate rect.

2005-01-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlroto.c: Delete file.

	* sdl.c (gsdl_init_rotozoom): Delete extern func decl.
	(init_module): No longer call `gsdl_init_rotozoom'.

	* Makefile.am (AM_CPPFLAGS): Delete var.
	(SUBDIRS): Likewise.
	(WRAPPER_SOURCES): Remove sdlroto.c.
	(sdl_la_LDFLAGS): No longer specify "-LSDL_rotozoom" and "-lrotozoom".

2005-01-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (fill_rect): Fix bug: Use `gh_scm2ulong'.

2005-01-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (peep_events): Use structure assignment instead of `memcpy'.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (event_action_enum): New var, global.
	(event_mask_flags): New var, static.
	(get_event_mask_flags): New GH_DEFPROC.
	(peep_events): Write implementation.
	(gsdl_evmask_flagstash): New extern var decl.
	(gsdl_init_event): Init `event_action_enum' and `event_mask_flags'.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* initf.fspec (#:struct): Arrange to quote the key.
	* kmodf.fspec: Likewise.
	* overlayf.fspec: Likewise.
	* palettef.fspec: Likewise.
	* videof.fspec: Likewise.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* evmaskf.fspec: New file.
	* Makefile.am (FLAGSTASH): Add evmaskf.c.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (event_state): Write implementation.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlenums.c (print_flagstash): Start w/ hash char per convention.

2005-01-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlgfx.c (scale_surface): Delete func.

2005-01-04  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (make_surface): Fix bug: Use `cflags'.
	(create_rgb_surface): Likewise.

2004-07-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Move "#define FUNC_NAME" inside func scope; nfc.
	* sdlcdrom.c: Likewise.
	* sdlcolor.c: Likewise.
	* sdlenums.c: Likewise.
	* sdlevent.c: Likewise.
	* sdlgfx.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlrect.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2004-07-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (gsdl_init_event):
	Remove `SDL_DISABLE' from `event-states' enumstash.

2004-07-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (gsdl_init_video): Use macro `GSDL_CSCS'.
	* sdlevent.c (gsdl_init_event): Likewise.

2004-07-22  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlenums.c (hfold): New static var.
	(acons): Likewise.
	(MAKE_HASH_TABLE): Init w/ `SCM_EOL'.
	(enumstash_enums): New GH_DEFPROC.
	(gsdl_init_enums): Init `acons' and `hfold'.

2004-07-12  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (install-data-hook): In $(cmoddir),
	symlink each foo.la in $(cmod_LTLIBRARIES) to libfoo.la.

2004-06-28  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c (scm_init_sdl_sdl_module): Rename
	from `sdl_init_sdl_sdl_sup_module'.

	* Makefile.am (cmod_LTLIBRARIES): Remove sdl-sup.la, add sdl.la.
	(sdl_sup_la_SOURCES): Delete.
	(sdl_sup_la_LDFLAGS): Likewise.
	(sdl_la_SOURCES): New automake var/directive.
	(sdl_la_LDFLAGS): Likewise.
	(install-data-hook): New target.

2004-05-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c (gsdl_smob_tags): Init w/ dummy value.

2004-03-05  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Doc munging; nfc.

	* sdlcdrom.c: Doc munging.
	Simplify expressions comparing against NULL.
	Use new macros.
	(UNPACK_CDROM): New macro.
	(RETURN_NEW_CDROM): Likewise.
	(CDROM_P): Likewise.
	(TRAYEMTPY): New simple symbol.
	(STOPPED): Likewise.
	(PLAYING): Likewise.
	(PAUSED): Likewise.
	(ERROR): Likewise.
	(cd_status): Return symbol instead of number.
	(cd_get_nth_track): On error return #f.

	* sdlcolor.c: Use `UNPACK_COLOR'.

	* sdlenums.c: Use new macros.
	(ASSERT_ENUM): New macro.
	(UNPACK_ENUM): Likewise.
	(UNPACK_FLAGSTASH): Likewise.

	* sdlevent.c: Doc munging.
	Use new macros.
	(UNPACK_EVENT): New macro.
	(RETURN_NEW_EVENT): Likewise.
	(UNPACK_KEYSYM): Likewise.
	(RETURN_NEW_KEYSYM): Likewise.

	* sdlgfx.c: Use macro `THROW_NOT_YET_IMPLEMENTED'.

	* sdljoystick.c: Simplify expressions comparing against NULL.
	Use new macros.
	(UNPACK_JOYSTICK): New macro.
	(RETURN_NEW_JOYSTICK): Likewise.
	(JOYSTICK_P): Likewise.
	(joystick_get_ball): On error, return #f.

	* sdlroto.c: Refill; nfc.

	* sdlsurface.c: Use new macro.
	(SURFACE_P): New macro.

	* sdlvideo.c: Use new macros.
	(COLOR_P): New macro.
	(RECT_P): Likewise.

2004-03-04  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (string_to_image): New GH_DEFPROC.

2004-02-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Use `RETURN_LIST4',
	`RETURN_LIST0' and `RETURN_LIST3'.
	* sdlevent.c: Use `RETURN_LIST3'.
	* sdljoystick.c: Use `RETURN_LIST2' and `RETURN_LIST0'.
	* sdlvideo.c: Use `RETURN_LIST11', `RETURN_LIST3',
	`RETURN_LIST4' and `RETURN_LIST2'.

2004-02-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c: Use `gh_bool2scm'.

2004-02-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Include "bool.h".
	Use `RETURN_FALSE' and `NOT_FALSEP'.

	* sdlenums.c: Include "bool.h".
	Use `RETURN_FALSE', `BOOL_FALSE' and `NOT_FALSEP'.

	* sdlevent.c: Include "bool.h". Use `NOT_FALSEP'.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.

	* sdlvideo.c: Include "bool.h".
	Use `NOT_FALSEP', `SET_FALSE', `SET_TRUE',
	`BOOL_FALSE', `RETURN_FALSE' and `EXACTLY_FALSEP'.

2004-02-25  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Include "sym.h".
	Use `DECLARE_SIMPLE_SYM' and `SYM'.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlvideo.c: Likewise.	Also, use `DECLARE_SYM'.

2004-02-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlenums.c: Include "retval.h".
	Use `RETURN_UINT'.

2004-02-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Use `RETURN_0STR'.
	* sdlcdrom.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlvideo.c: Likewise.

2004-02-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Use `RETURN_BOOL'.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2004-02-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Use `RETURN_INT'.
	* sdlcdrom.c: Likewise.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2004-02-24  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Include "retval.h".
	Use `RETURN_UNSPECIFIED'.
	* sdlcdrom.c: Likewise.
	* sdlevent.c: Likewise.
	* sdlgfx.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2004-02-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlvideo.c (video_mode_ok): Make fourth arg optional.
	(flip): Doc fix; nfc.
	(wm_set_caption): Make second arg optional.

2004-02-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlsurface.c (set_clip_rect): Make second arg optional.

2004-02-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlroto.c (roto_zoom_surface): Fix bug: Set `zoom' correctly.

2004-02-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c (cd_play_tracks): Handle #f same as unbound, for
	`s_start_track', `s_start_frame', `s_n_tracks' and `s_n_frames'.
	(cd_msf_to_frames): Likewise, for `s_s' and `s_f'.

	* sdlevent.c (make_keysym): Handle #f same as unbound for `sym'.

	* sdlroto.c (roto_zoom_surface): Handle #f same as unbound for `s_zoom'.
	(zoom_surface): Likewise, for `s_zoomy'.

	* sdlsurface.c (blit_surface): Handle #f same as
	unbound, for `s_srcrect', `s_dst' and `s_dstrect'.

	* sdlvideo.c (list_modes): Handle #f same as
	unbound, for `s_pixel_format' and `s_flags'.
	Also, fix bug: check `s_pixel_format', not SCM_UNDEFINED!

2004-01-18  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c, sdlcdrom.c, sdlcolor.c, sdlenums.c, sdlevent.c,
	sdlgfx.c, sdljoystick.c, sdlrect.c, sdlroto.c, sdlsurface.c,
	sdlvideo.c: Update copyright.

2003-11-23  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c (NUM2_GETTER, NUM2_SETTER, NUM3_GETTER, NUM3_SETTER):
	Fix over-specification bug: Remove redundant "##"
	pre-processor operators between "." and other tokens.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (sdl_sup_la_SOURCES): Add $(FLAGSTASH).
	Remove $(BUILT_SOURCES).
	(EXTRA_DIST): Add empty var to support $(top_srcdir)/am/fspec.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlgfx.c (gsdl_init_gfx): Rename from `gsdl_gfx_init'.
	* sdl.c (gsdl_init_gfx): Add forward decl.
	(init_module): Also call `gsdl_init_gfx'.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcolor.c (make_color): Use abstraction `RETURN_NEW_COLOR'.

	* sdlgfx.c (vertical_flip_surface, horizontal_flip_surface):
	Use abstraction `RETURN_NEW_SURFACE'.

	* sdlrect.c (make_rect): Use abstraction `RETURN_NEW_RECT'.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlroto.c (vertical_flip_surface, horizontal_flip_surface,
	vh_flip_surface): Delete redundant funcs.

2003-11-21  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlevent.c: Use `(void)' instead of `()' for arglists.
	(make_keysym, pump_events, peep_events, poll_event, wait_event,
	push_event, set_event_filter, get_event_filter, event_state,
	enable_unicode, enable_key_repeat, button_p): Add docstring.
	(get_key_state): Update docstring.

2003-11-20  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlgfx.c (horizontal_flip_surface):
	Fix typo in scheme name.

	* sdlroto.c (horizontal_flip_surface):
	Rename from `horiztonal_flip_surface'.

2003-11-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Rename Scheme-visible objects to omit "sdl-" prefix.
	* sdlcolor.c: Likewise.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlvideo.c: Likewise.
	* sdlcdrom.c: Likewise.
	* sdlenums.c: Likewise.
	* sdlgfx.c: Likewise.
	* sdlrect.c: Likewise.
	* sdlsurface.c: Likewise.

2003-11-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c (init_flags): Rename static var from `sdl_init_flags'.
	* sdlvideo.c (gl_enums): Rename static var from `sdl_gl_enums'.

2003-11-19  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Rename GH_DEFPROC funcs to omit leading "sdl_".
	Update associated "#define FUNC_NAME".
	* sdlcdrom.c: Likewise.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2003-11-17  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Use GH_DEFPROC instead of MDEFLOCEXP.
	* sdlcolor.c: Likewise.
	* sdlenums.c: Likewise.
	* sdlevent.c: Likewise.
	* sdlgfx.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlrect.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

	* sdl.c: Use GH_DEFPROC instead of MDEFLOCEXP
	and GH_MODULE_LINK_FUNC instead of MDEFLINKFUNC.

2003-11-10  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am: Include $(top_srcdir)/am/common.
	Include $(top_srcdir)/am/fspec.
	Include $(top_srcdir)/am/snarfing.
	(AM_CPPFLAGS): Change "=" to "+=".  Remove
	elements found in AM_CPPFLAGS set in $(top_srcdir)/am/common.
	(cmoddir, BUILT_DOCS, SUFFIXES, .c.x, fspec2c, .fspec.c,
	DISTCLEANFILES, GUILE_SNARF_DOCS, GUILE_SNARF_DOCS_TEXI,
	%.doc:%.c, .doc.texi): Delete.

2003-11-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Use gh_bool2scm.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2003-11-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdlcdrom.c: Use BOUNDP, UNBOUNDP, and UNBOUND_MEANS_FALSE macros.
	* sdlevent.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2003-11-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Use ARGH* instead of SCM_ARG*.
	* sdlcdrom.c: Likewise.
	* sdlcolor.c: Likewise.
	* sdlenums.c: Likewise.
	* sdlevent.c: Likewise.
	* sdlgfx.c: Likewise.
	* sdljoystick.c: Likewise.
	* sdlrect.c: Likewise.
	* sdlroto.c: Likewise.
	* sdlsurface.c: Likewise.
	* sdlvideo.c: Likewise.

2003-11-09  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (.c.x, .cspec.c): Use guile-tools
	instead of pre-inst-guile-tools.

2003-11-08  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* sdl.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdl.h".
	Include "config.h" and "argcheck.h".
	No longer include "sdlrect.h", "sdlcolor.h", "sdlsurface.h",
	"sdlvideo.h", "sdlevent.h", "sdlcdrom.h", "sdljoystick.h"
	and "sdlroto.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(gsdl_init_enums): Add forward decl for this func.
	(gsdl_init_rect, gsdl_init_color, gsdl_init_video,
	gsdl_init_surface, gsdl_init_rotozoom, gsdl_init_event,
	gsdl_init_joystick, gsdl_init_cdrom): Likewise.
	(gsdl_smob_tags): New var.
	(sdl_init_flags): Make static.
	(sdl_get_init_flags): New MDEFLOCEXP func.
	(gsdl_init_flagstash): New extern var decl.
	(init_module): Rename from `guile_sdl_init' and make static.
	Use `gsdl_make_flagstash' and associated arglist to
	set `sdl_init_flags' instead of `scm_c_define_flag'.
	Remove call to `scm_c_export'.
	(scm_init_sdl_sdl_sup_module): New func, declared and
	defined using macro `MDEFLINKFUNC'.

	* sdlcdrom.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlcdrom.h".
	Include "config.h", "argcheck.h" and "sdlsmobs.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(cdrom_tag): Rename from `sdl_cdrom_tag'. Make static.
	(ASSERT_CDROM): New macro.
	(sdl_cd_get_nth_track): Make return value assoc list w/
	one SCM_LISTn call instead of with multiple `scm_acons' calls.
	(sdl_cd_frames_to_msf): Likewise.
	(gsdl_sym_offset, gsdl_sym_length, gsdl_sym_type, gsdl_sym_id,
	gsdl_sym_f, gsdl_sym_s, gsdl_sym_m): New static vars.
	(mark_cd): New static func.
	(free_cd, print_cd): Make static.
	(sdl_init_cdrom): Register `mark_cd'.
	Remove call to `scm_c_export'.

	* sdlcolor.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlsurface.h".
	Include "config.h", "argcheck.h" and "wholefns.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(color_tag): Make static.
	(mark_color): New static func.
	(free_color, print_color): Make static.
	(NUMBER_GETTER, NUMBER_SETTER, NUMBER_GETSET): New macros.
	(sdl_init_color): Register `mark_color'.
	Remove calls to `scm_c_define_gsubr'.
	Remove call to `scm_c_export'.

	* sdlenums.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlsurface.h".
	Include "config.h" and "argcheck.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(MAX_FLAGS): Delete macro.
	(enum_tag): Make static.
	(enum_struct): New struct.
	(mark_enum, free_enum): Make static.
	(REASONABLE_BUCKET_COUNT): New macro.
	(MAKE_HASH_TABLE): New macro.
	(gsdl_define_enum): Rename from `scm_c_define_enum'.
	(gsdl_enum2long): Rename from `scm_enum2long'.
	(gsdl_long2enum): Rename from `scm_long2enum'.
	(number_to_enum): Rename from `scm_number_to_enum'. Make MDEFLOCEXP.
	(scm_c_define_flag): Delete func.
	(flagstash_tag): New static var.
	(ASSERT_FLAGSTASH): New macro.
	(mark_flagstash, free_flagstash, print_flagstash): New static funcs.
	(gsdl_make_flagstash): New func.
	(gsdl_flags2ulong): Rename from `scm_flags2ulong'.
	Remove support for `flags' being an exact number.
	Add support for `flags' being a single symbol.
	(gsdl_ulong2flags): Rename from `scm_ulong2flags'.
	Fix bug: Test full mask instead of only one bit position.
	Fix bug: Handle case where stash has a member w/ value 0x0.
	No longer unconditionally return computed result; instead,
	return SCM_BOOL_F if the stash does not cover the value.
	(flagstash_flags): New MDEFLOCEXP func.
	(flags_to_number): Rename from `scm_flags_to_number'.
	Make MDEFLOCEXP.
	(number_to_flags): Likewise from `scm_number_to_flags'.
	(gsdl_init_enums): Renaem from `sdl_init_enums'.
	Register smob type "flagstash" and its mark, free, print funcs.
	Remove call to `scm_c_export'.

	* sdlevent.c: Update copyright.
	Include <guile/gh.h>.
	No longer include "sdlevent.h".
	Include "config.h", "argcheck.h" and "wholefns.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(event_tag, keysym_tag, event_mod_flags): Make static.
	(ASSERT_EVENT, ASSERT_KEYSYM): New macros.
	(mark_event, mark_keysym, free_keysym): New static funcs.
	(free_event): Make static.
	(make_keysym): Make MDEFLOCEXP.
	(ENUM_GETTER, ENUM_SETTER, ENUM_GETSET, NUMBER_GETTER,
	NUMBER_SETTER, NUM2_GETTER, NUM2_SETTER, NUM2_GETSET,
	NUM3_GETTER, NUM3_SETTER, NUM3_GETSET, FLAG_GETTER,
	FLAG_SETTER, FLAG_GETSET): New macros.
	(pump_events, peep_events, poll_event, wait_event, push_event,
	set_event_filter, get_event_filter, event_state, sdl_enable_unicode,
	sdl_enable_key_repeat, sdl_get_key_state, sdl_get_mod_state,
	sdl_set_mod_state, sdl_get_mouse_state, sdl_get_relative_mouse_state,
	sdl_button_p): Make MDEFLOCEXP.
	(gsdl_sym_state, gsdl_sym_x, gsdl_sym_y): New static vars.
	(sdl_get_event_mod_flags): New MDEFLOCEXP.
	(gsdl_kmod_flagstash): New extern var decl.
	(gsdl_init_event): Rename from `sdl_init_event'.
	Register `mark_event'.
	Register smob type "SDL-Keysym" and its mark and free funcs.
	Initialize `event_mod_flags' using `gsdl_make_flagstash'
	instead of `scm_c_define_flag'.
	Remove calls to `scm_c_define_gsubr'.
	Remove call to `scm_c_export'.

	* sdlgfx.c: Update copyright.
	Include <guile/gh.h> and <SDL/SDL_image.h>.
	No longer include "sdlgfx.h".
	Include "config.h", "argcheck.h" and "sdlsmobs.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Write docstrings.
	(gsdl_gfx_init): Rename from `sdl_gfx_init'.
	Remove calls to `scm_c_define_gsubr'.
	Remove call to `scm_c_export'.

	* sdljoystick.c: Update copyright.
	No longer include <libguile.h>.
	No longer include "sdljoystick.h".
	Include "config.h", "argcheck.h" and "sdlsmobs.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(joystick_tag): Rename from `sdl_joystick_tag'. Make static.
	(ASSERT_JOYSTICK): New macro.
	(gsdl_init_joystick): Rename from `sdl_init_joystick'.
	Register func `mark_joy'.
	Remove call to `scm_c_export'.

	* sdlrect.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlenums.h".
	No longer include "sdlrect.h".
	Include "config.h", "argcheck.h" and "wholefns.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(rect_tag): Delete var.
	(mark_rect): New static func.
	(free_rect, print_rect): Make static.
	(gsdl_init_rect): Rename from `sdl_init_rect'.
	Register func `mark_rect'.
	Remove calls to `scm_c_define_gsubr'.
	Remove call to `scm_c_export'.

	* sdlroto.c: Update copyright.
	No longer include <libguile.h>.
	No longer include "sdlroto.h".
	No longer include "sdlvideo.h".
	Include "config.h", "argcheck.h" and "sdlsmobs.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(gsdl_init_rotozoom): Rename from `sdl_init_rotozoom'.
	Remove call to `scm_c_export'.

	* sdlsurface.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlsurface.h".
	Include "config.h", "argcheck.h" and "wholefns.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(surface_tag): Delete var.
	(mark_surface): New static func.
	(free_surface, print_surface): Make static.
	(gsdl_init_surface): Rename from `sdl_init_surface'.
	Register func `mark_surface'.
	Remove calls to `scm_c_define_gsubr'.
	Remove call to `scm_c_export'.

	* sdlvideo.c: Update copyright.
	No longer include <libguile.h>.
	Include <guile/gh.h>.
	No longer include "sdlrect.h".
	No longer include "sdlcolor.h".
	No longer include "sdlsurface.h".
	Include "config.h" and "argcheck.h".
	Throughout, replace `SCM_DEFINE' with `MDEFLOCEXP'.
	Throughout, use gh_* funcs and other abstractions where possible.
	Convert docstrings: "returns" -> "return", etc.
	(sdl_gl_enums): Make static.
	(gsdl_alpha_enums): Rename from `sdl_alpha_enums'.
	(gsdl_video_flags): Rename from `sdl_video_flags'.
	(gsdl_palette_flags): Rename from `sdl_palette_flags'.
	(pixel_format_tag): Delete var.
	(cursor_tag, overlay_tag): Make static.
	(ASSERT_CURSOR, ASSERT_OVERLAY, UNPACK_CURSOR, UNPACK_OVERLAY,
	RETURN_NEW_CURSOR, RETURN_NEW_OVERLAY): New macros.
	(mark_cursor, mark_yuv_overlay, mark_pixel_format): New static funcs.
	(free_cursor, free_yuv_overlay, free_pixel_format): Make static.
	(sdl_get_video_flags, sdl_get_palette_flags,
	sdl_get_overlay_formats): New MDEFLOCEXP funcs.
	(gsdl_sym_hw_available, gsdl_sym_ww_available, gsdl_sym_blit_hw,
	gsdl_sym_blit_hw_CC, gsdl_sym_blit_hw_A, gsdl_sym_blit_sw,
	gsdl_sym_blit_sw_CC, gsdl_sym_blit_sw_A, gsdl_sym_blit_fill,
	gsdl_sym_video_mem, gsdl_sym_vfmt, gsdl_sym_redtable,
	gsdl_sym_greentable, gsdl_sym_bluetable, gsdl-sym_r, gsdl_sym_g,
	gsdl_sym_b, gsdl_sym_a, gsdl_sym_title, gsdl_sym_icon): New static vars.
	(GAMMAVEC): New macro.
	(fill_rect): No longer return a number. Instead, return #t for success.
	(ASSERT_VSZFIT): New macro.
	(gsdl_video_flagstash, gsdl_palette_flagstash,
	gsdl_overlay_flagstash): New extern var decls.
	(gsdl_init_video): Rename from `sdl_init_video'.
	Register `mark_cursor' and `free_cursor'.
	Register `mark_pixel_format'.
	Register `mark_yuv_overlay'.
	(gsdl_video_flags, gsdl_palette_flags, gsdl_overlay_formats):
	Initialize using `gsdl_make_flagstash' instead of `scm_c_define_flag'.
	Remove call to `scm_c_export'.

2003-11-07  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (AM_CPPFLAGS): Add "-Ifoo"
	for $(srcdir) and some children.
	(lib_LTLIBRARIES): Delete directive.
	(libguileSDL_la_SOURCES): Likewise.
	(libguileSDL_la_CFLAGS): Likewise.
	(libguileSDL_la_LIBADD): Likewise.
	(libguileSDL_la_LDFLAGS): Likewise.
	(libguileSDL_la_DEPENDENCIES): Likewise.
	(cmoddir): New var.
	(cmod_LTLIBRARIES): New directive.
	(FLAGSTASH): New var.
	(BUILT_SOURCES): Add $(FLAGSTASH).
	(sdl_sup_la_SOURCES): New directive.
	(sdl_sup_la_LDFLAGS): Likewise.
	(SUFFIXES): Add ".fspec".
	(GUILE_SNARF): Delete var.
	(.c.x): Use pre-inst-$(c2x) instead of $(GUILE_SNARF).
	(.fspec.c): New pattern rule.

2003-11-07  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* initf.fspec (#:gperf-options): Add "--includes".
	* kmodf.fspec: Likewise.
	* overlayf.fspec: Likewise.
	* palettef.fspec: Likewise.
	* videof.fspec: Likewise.

2003-11-06  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* initf.fspec: New file.
	* kmodf.fspec: Likewise.
	* overlayf.fspec: Likewise.
	* palettef.fspec: Likewise.
	* videof.fspec: Likewise.

2003-10-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (CC, CFLAGS, LIBS): Delete vars.
	(AM_CPPFLAGS): Renamed from `INCLUDES'.

2003-10-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am (PACKAGE, VERSION): Delete directives.

2003-10-29  Thien-Thi Nguyen  <ttn@surf.glug.org>

	* Makefile.am: Merge multiple `SUFFIXES' directives into one.

